"use strict";(()=>{var e={};e.id=410,e.ids=[410],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},9926:e=>{e.exports=import("zod")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},9461:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{config:()=>A,default:()=>u,routeModule:()=>c});var s=r(1802),i=r(7153),a=r(6249),o=r(94),E=e([o]);o=(E.then?(await E)():E)[0];let u=(0,a.l)(o,"default"),A=(0,a.l)(o,"config"),c=new s.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/test/auth-debug",pathname:"/api/test/auth-debug",bundlePath:"",filename:""},userland:o});n()}catch(e){n(e)}})},8159:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{O:()=>o});var s=r(9926),i=e([s]);let a=(s=(i.then?(await i)():i)[0]).z.object({KALSHI_API_ID:s.z.string().min(1),KALSHI_PRIVATE_KEY:s.z.string().min(1),VERCEL_AI_GATEWAY_KEY:s.z.string().min(1).optional(),AI_GATEWAY_API_KEY:s.z.string().min(1).optional(),VERCEL_OIDC_TOKEN:s.z.string().min(1).optional(),SUPABASE_URL:s.z.string().url(),SUPABASE_KEY:s.z.string().min(1).optional(),SUPABASE_SERVICE_ROLE_KEY:s.z.string().min(1).optional(),CRON_SECRET:s.z.string().min(1),DAILY_BUDGET:s.z.string().transform(Number).default("100"),MIN_ODDS:s.z.string().transform(Number).default("0.85"),MAX_ODDS:s.z.string().transform(Number).default("0.98"),MAX_DAYS_TO_RESOLUTION:s.z.string().transform(Number).default("2"),MIN_LIQUIDITY:s.z.string().transform(Number).default("2000"),DRY_RUN:s.z.string().transform(e=>"true"===e).default("false"),INITIAL_BANKROLL:s.z.string().transform(Number).default("1000")}),o=function(){try{let e=a.parse(process.env),t=e.SUPABASE_KEY||e.SUPABASE_SERVICE_ROLE_KEY;if(!t)throw Error("Missing SUPABASE_KEY (or SUPABASE_SERVICE_ROLE_KEY)");let r=e.VERCEL_AI_GATEWAY_KEY||e.AI_GATEWAY_API_KEY||e.VERCEL_OIDC_TOKEN;if(!r)throw Error("Missing VERCEL_AI_GATEWAY_KEY (or AI_GATEWAY_API_KEY / VERCEL_OIDC_TOKEN)");return{...e,SUPABASE_KEY:t,VERCEL_AI_GATEWAY_KEY:r}}catch(e){if(e instanceof s.z.ZodError){let t=e.errors.map(e=>e.path.join(".")).join(", ");throw Error(`Missing or invalid environment variables: ${t}`)}throw e}}();n()}catch(e){n(e)}})},94:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{default:()=>E});var s=r(8159),i=r(4770),a=r.n(i),o=e([s]);async function E(e,t){if(e.headers.authorization!==`Bearer ${process.env.CRON_SECRET}`)return t.status(401).json({error:"Unauthorized"});let r={timestamp:new Date().toISOString(),checks:{}};try{r.checks.apiId={exists:!!s.O.KALSHI_API_ID,length:s.O.KALSHI_API_ID?.length||0,preview:s.O.KALSHI_API_ID?s.O.KALSHI_API_ID.substring(0,10)+"...":"MISSING"};let e=s.O.KALSHI_PRIVATE_KEY||"",n=e.replace(/\\n/g,"\n").trim();r.checks.privateKey={exists:!!e,length:e.length,normalizedLength:n.length,hasBeginMarker:n.includes("BEGIN")||n.includes("BEGIN RSA PRIVATE KEY")||n.includes("BEGIN PRIVATE KEY"),hasEndMarker:n.includes("END"),firstLine:n.split("\n")[0],lastLine:n.split("\n").filter(e=>e.trim()).slice(-1)[0],lineCount:n.split("\n").length};try{let e=a().createPrivateKey(n);r.checks.keyParsing={success:!0,keyType:e.asymmetricKeyType}}catch(e){r.checks.keyParsing={success:!1,error:e.message}}try{let e=Date.now().toString(),t="/markets",s=`${e}GET${t}`,i=a().createPrivateKey(n),o=a().sign("sha256",Buffer.from(s),{key:i});r.checks.signatureTest={success:!0,timestamp:e,method:"GET",path:t,message:s,signatureLength:o.length,signatureBase64:o.toString("base64").substring(0,50)+"..."}}catch(e){r.checks.signatureTest={success:!1,error:e.message,stack:e.stack}}return r.checks.envFormat={rawKeyStartsWithQuote:e.startsWith('"')||e.startsWith("'"),rawKeyEndsWithQuote:e.endsWith('"')||e.endsWith("'"),hasEscapedNewlines:e.includes("\\n"),hasRealNewlines:e.includes("\n")},t.status(200).json(r)}catch(e){return t.status(500).json({error:e.message,stack:void 0,debug:r})}}s=(o.then?(await o)():o)[0],n()}catch(e){n(e)}})},7153:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},1802:(e,t,r)=>{e.exports=r(145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var r=t(t.s=9461);module.exports=r})();